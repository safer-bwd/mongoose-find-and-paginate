# mongoose-find-and-paginate

[![Build Status](https://travis-ci.com/safer-bwd/mongoose-find-and-paginate.svg?branch=master)](https://travis-ci.com/safer-bwd/mongoose-find-and-paginate)

A Mongoose plugin that provides a method, _findAndPaginate()_, for performing a find and a calculation pagination parameters at the same time.

## Install

```sh
npm install mongoose-find-and-paginate --save
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### findAndPaginate

#### Parameters

-   `filter` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The query filter
-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The query options
-   `callback` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** 

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[findAndPaginateResult](#findandpaginateresult)>** 

### findAndPaginateResult

Type: [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)

#### Properties

-   `docs` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** 
-   `totalDocs` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** 
-   `totalPages` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** 

## Usage

```javascript
import mongoose from 'mongoose';
import findAndPaginatePlugin from 'mongoose-find-and-paginate';

const schema = new mongoose.Schema({ ... });
schema.plugin(findAndPaginatePlugin);
const Model = mongoose.model('Model', schema);
```

```javascript
const filter = { ... };
const { docs, totalDocs } = await Model.findAndPaginate(filter, {
  skip: 10,
  limit: 5,
  sort: '_id'
});
```

```javascript
const filter = { ... };
const { docs, totalPages } = await Model.findAndPaginate(filter, {
  page: 3,
  perPage: 5,
  sort: '_id'
});
```
